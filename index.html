<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Marmita das Meninas — Monte sua marmita</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1: #fff7fb;
      --bg2: #fff1f6;
      --primary: #d63384;
      --accent: #f6b0d3;
      --muted: #7d6b7d;
      --card: #ffffff;
      --glass: rgba(255,255,255,0.7);
      --shadow: 0 6px 24px rgba(139,66,100,0.12);
      --radius: 14px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color:#2b2430;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
    }

    .container{
      width:100%;
      max-width:1100px;
      background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,250,251,0.85));
      border-radius:var(--radius);
      padding:28px;
      box-shadow:var(--shadow);
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:24px;
    }

    header{
      grid-column:1/-1;
      display:flex;
      align-items:center;
      gap:18px;
    }
    .logo{
      width:74px;
      height:74px;
      border-radius:12px;
      background:linear-gradient(135deg,var(--primary),var(--accent));
      display:flex;
      align-items:center;
      justify-content:center;
      color:white;
      font-family:"Playfair Display";
      font-size:18px;
      box-shadow: 0 8px 30px rgba(214,51,132,0.18);
    }
    h1{
      margin:0;
      font-family:"Playfair Display";
      font-weight:700;
      font-size:20px;
      color:#3a2230;
    }
    p.lead{
      margin:4px 0 0 0;
      color:var(--muted);
      font-size:14px;
    }

    .builder{
      padding:18px;
      background:var(--card);
      border-radius:12px;
      box-shadow: 0 6px 18px rgba(85,51,68,0.06);
      overflow:auto;
      max-height:72vh;
    }

    .category{
      margin-bottom:18px;
    }
    .category h3{
      margin:0 0 8px 0;
      font-size:16px;
      color:#502838;
      font-weight:600;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
    }

    .item{
      display:flex;
      align-items:center;
      gap:12px;
      padding:10px;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,245,247,0.95));
      border:1px solid rgba(192,168,183,0.25);
    }
    .item label{
      font-size:14px;
      color:#4b2f3d;
      flex:1;
    }
    .item input[type="number"]{
      width:88px;
      padding:6px 8px;
      border-radius:8px;
      border:1px solid rgba(160,130,150,0.15);
      background:transparent;
      text-align:right;
      font-weight:600;
    }
    .small{
      font-size:12px;color:var(--muted);
      margin-top:6px;
    }

    .controls{
      display:flex;
      gap:10px;
      margin-top:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .btn{
      background:var(--primary);
      color:white;
      border:none;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      box-shadow: 0 8px 20px rgba(214,51,132,0.12);
    }
    .btn.ghost{
      background:transparent;
      border:1px solid rgba(140,110,130,0.12);
      color:#6a4756;
      box-shadow:none;
    }

    .summary{
      padding:22px;
      background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,250,252,0.95));
      border-radius:12px;
      border:1px solid rgba(210,180,200,0.08);
      box-shadow: 0 8px 28px rgba(120,80,100,0.06);
    }
    .summary h2{
      margin:0 0 6px 0;
      font-family:"Playfair Display";
      font-size:18px;
      color:#3a2230;
    }
    .stat{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin:10px 0;
      font-weight:600;
      color:#472a34;
    }
    .muted{
      font-weight:400;
      color:var(--muted);
      font-size:13px;
    }

    .order-row{
      display:flex;
      gap:10px;
      align-items:center;
      margin-top:8px;
    }
    .order-row input[type="number"]{
      width:120px;
      padding:8px;
      border-radius:10px;
      border:1px solid rgba(160,130,150,0.12);
    }

    .total{
      font-size:20px;
      color:#2a1020;
    }

    .note{
      font-size:13px;
      color:var(--muted);
      margin-top:8px;
      line-height:1.3;
    }

    .error{
      color:#b72b3f;
      font-weight:700;
      margin-top:6px;
    }

    footer{
      grid-column:1/-1;
      text-align:center;
      margin-top:8px;
      font-size:13px;
      color:var(--muted);
    }

    @media (max-width:980px){
      .container{grid-template-columns:1fr; padding:18px;}
      .summary{order:2}
    }
  </style>
</head>
<body>
  <div class="container" role="main">
    <header>
      <div class="logo" aria-hidden="true">MM</div>
      <div>
        <h1>Marmita das Meninas</h1>
        <p class="lead">Monte sua marmita premium de 300g — escolha quantas gramas de cada opção.</p>
      </div>
    </header>

    <section class="builder" aria-label="Montador de marmita">
      <div class="category">
        <h3>Proteínas</h3>
        <div class="grid" id="proteins">
          <div class="item"><label>Carne de panela</label><input type="number" min="0" max="300" step="10" value="0" data-group="protein"></div>
          <div class="item"><label>Carne em tiras</label><input type="number" min="0" max="300" step="10" value="0" data-group="protein"></div>
          <div class="item"><label>Carne moída</label><input type="number" min="0" max="300" step="10" value="0" data-group="protein"></div>
          <div class="item"><label>Carne suína</label><input type="number" min="0" max="300" step="10" value="0" data-group="protein"></div>
          <div class="item"><label>Filé de frango</label><input type="number" min="0" max="300" step="10" value="0" data-group="protein"></div>
          <div class="item"><label>Filé de peixe</label><input type="number" min="0" max="300" step="10" value="0" data-group="protein"></div>
          <div class="item"><label>Grão de bico</label><input type="number" min="0" max="300" step="10" value="0" data-group="protein"></div>
        </div>
      </div>

      <div class="category">
        <h3>Carboidratos</h3>
        <div class="grid" id="carbs">
          <div class="item"><label>Arroz</label><input type="number" min="0" max="300" step="10" value="0" data-group="carb"></div>
          <div class="item"><label>Macarrão</label><input type="number" min="0" max="300" step="10" value="0" data-group="carb"></div>
          <div class="item"><label>Batata doce (cozida/purê)</label><input type="number" min="0" max="300" step="10" value="0" data-group="carb"></div>
          <div class="item"><label>Batata inglesa (cozida/purê)</label><input type="number" min="0" max="300" step="10" value="0" data-group="carb"></div>
          <div class="item"><label>Aipim (cozido/purê)</label><input type="number" min="0" max="300" step="10" value="0" data-group="carb"></div>
        </div>
      </div>

      <div class="category">
        <h3>Legumes</h3>
        <div class="grid" id="vegs">
          <div class="item"><label>Beterraba</label><input type="number" min="0" max="300" step="10" value="0" data-group="veg"></div>
          <div class="item"><label>Cenoura</label><input type="number" min="0" max="300" step="10" value="0" data-group="veg"></div>
          <div class="item"><label>Brócolis</label><input type="number" min="0" max="300" step="10" value="0" data-group="veg"></div>
          <div class="item"><label>Couve-flor</label><input type="number" min="0" max="300" step="10" value="0" data-group="veg"></div>
          <div class="item"><label>Abóbora (cozida/purê)</label><input type="number" min="0" max="300" step="10" value="0" data-group="veg"></div>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="fillBalanced">Distribuir 300g equilibrado</button>
        <button class="btn ghost" id="clearAll">Zerar</button>
        <div class="small">Dica: use passos de 10g para facilitar a distribuição.</div>
      </div>

      <div class="small" style="margin-top:12px">
        Total por marmita: <strong id="sumGrams">0</strong>g — <span id="sumNote">faça 300g</span>
      </div>
    </section>

    <aside class="summary" aria-label="Resumo do pedido">
      <h2>Resumo do pedido</h2>

      <div class="stat">
        <div>
          <div class="muted">Preço unitário</div>
          <div>R$ 19,00</div>
        </div>
        <div class="muted">Tamanho: <strong>300g</strong></div>
      </div>

      <div class="order-row" style="margin-top:12px">
        <label class="muted" for="qty">Quantas marmitas deseja comprar?</label>
      </div>
      <div class="order-row">
        <input id="qty" type="number" min="1" step="1" value="1" aria-label="Quantidade de marmitas" />
        <div style="flex:1">
          <div class="muted">Promoções:</div>
          <div class="small">A cada 10 pagas ganha +1 (ex.: compre 10 e receba 11). A cada 20 pagas ganha +2.</div>
        </div>
      </div>

      <div style="margin-top:16px">
        <div class="muted">Marmitas (pagas)</div>
        <div style="font-size:18px;font-weight:700" id="paidCount">1</div>
      </div>

      <div style="margin-top:8px">
        <div class="muted">Bônus (gratuitas)</div>
        <div style="font-size:18px;font-weight:700;color:#7d4a65" id="freeCount">0</div>
      </div>

      <div style="margin-top:8px">
        <div class="muted">Total de marmitas que você receberá</div>
        <div class="total" id="totalCount">1</div>
      </div>

      <div style="margin-top:14px">
        <div class="muted">Total a pagar</div>
        <div style="font-size:22px;font-weight:800;color:var(--primary)" id="totalPrice">R$ 19,00</div>
        <div class="muted small" id="effectivePrice">Preço efetivo por marmita: R$ 19,00</div>
      </div>

      <div id="orderError" class="error" role="alert" style="display:none"></div>

      <div style="margin-top:16px;display:flex;gap:10px;align-items:center">
        <button class="btn" id="orderButton">Finalizar pedido</button>
        <button class="btn ghost" id="previewBtn">Visualizar marmita</button>
      </div>

      <p class="note">Observação: os valores e bônus são aplicados conforme quantidade de marmitas pagas. Confirme que a soma das gramas por marmita é 300g antes de finalizar.</p>
    </aside>

    <footer>
      Marmita das Meninas — sabor, carinho e prática. &nbsp;|&nbsp; Todos os preços em reais (BRL)
    </footer>
  </div>

  <script>
    (function(){
      const PRICE = 19.00;
      const inputs = Array.from(document.querySelectorAll('input[type="number"][data-group]'));
      const sumGramsEl = document.getElementById('sumGrams');
      const sumNoteEl = document.getElementById('sumNote');
      const qtyEl = document.getElementById('qty');
      const paidCountEl = document.getElementById('paidCount');
      const freeCountEl = document.getElementById('freeCount');
      const totalCountEl = document.getElementById('totalCount');
      const totalPriceEl = document.getElementById('totalPrice');
      const effectivePriceEl = document.getElementById('effectivePrice');
      const orderError = document.getElementById('orderError');
      const orderButton = document.getElementById('orderButton');
      const previewBtn = document.getElementById('previewBtn');
      const fillBalanced = document.getElementById('fillBalanced');
      const clearAll = document.getElementById('clearAll');

      function sumGrams(){
        return inputs.reduce((s,i)=> s + (Number(i.value)||0), 0);
      }

      function updateSumUI(){
        const total = sumGrams();
        sumGramsEl.textContent = total;
        if(total === 300){
          sumNoteEl.textContent = 'pronto — 300g';
          sumNoteEl.style.color = '';
        }else if(total < 300){
          sumNoteEl.textContent = 'faltam ' + (300-total) + 'g';
          sumNoteEl.style.color = '#b72b3f';
        }else{
          sumNoteEl.textContent = 'excedeu em ' + (total-300) + 'g';
          sumNoteEl.style.color = '#b72b3f';
        }
      }

      function calcFree(qty){
        // Promoção: a cada 10 pagas ganha +1 (ex.: 10->+1, 20->+2)
        return Math.floor(qty / 10);
      }

      function updatePriceUI(){
        const qty = Math.max(0, Math.floor(Number(qtyEl.value)||0));
        const free = calcFree(qty);
        const total = qty + free;
        const totalPrice = qty * PRICE;
        const effective = total>0 ? (totalPrice / total) : PRICE;

        paidCountEl.textContent = qty;
        freeCountEl.textContent = free;
        totalCountEl.textContent = total;
        totalPriceEl.textContent = 'R$ ' + totalPrice.toFixed(2);
        effectivePriceEl.textContent = 'Preço efetivo por marmita: R$ ' + effective.toFixed(2);

        // Validation
        const grams = sumGrams();
        if(grams !== 300){
          orderError.style.display = 'block';
          orderError.textContent = 'A soma das gramas por marmita precisa ser 300g antes de finalizar.';
          orderButton.disabled = true;
          orderButton.style.opacity = 0.6;
        } else if(qty < 1){
          orderError.style.display = 'block';
          orderError.textContent = 'Escolha pelo menos 1 marmita.';
          orderButton.disabled = true;
          orderButton.style.opacity = 0.6;
        } else {
          orderError.style.display = 'none';
          orderButton.disabled = false;
          orderButton.style.opacity = 1;
        }
      }

      // Events
      inputs.forEach(i=>{
        i.addEventListener('input', ()=>{
          // sanitize values
          if(i.value === '') i.value = 0;
          i.value = Math.max(0, Math.min(300, Math.round(Number(i.value)||0)));
          updateSumUI(); updatePriceUI();
        });
      });

      qtyEl.addEventListener('input', ()=>{
        if(qtyEl.value === '') qtyEl.value = 0;
        qtyEl.value = Math.max(0, Math.round(Number(qtyEl.value)||0));
        updatePriceUI();
      });

      fillBalanced.addEventListener('click', ()=>{
        // Distribui 300g: 100g proteínas (se houver muitas, divide entre as primeiras), 100g carbo, 100g legumes
        const proteinInputs = inputs.filter(i=>i.dataset.group === 'protein');
        const carbInputs = inputs.filter(i=>i.dataset.group === 'carb');
        const vegInputs = inputs.filter(i=>i.dataset.group === 'veg');

        function distribute(list, grams){
          const per = Math.floor(grams / Math.max(1, list.length));
          list.forEach((i, idx) => {
            if(idx === list.length - 1){
              // last gets remainder
              i.value = grams - per * (list.length - 1);
            } else {
              i.value = per;
            }
          });
        }

        distribute(proteinInputs, 100);
        distribute(carbInputs, 100);
        distribute(vegInputs, 100);

        updateSumUI(); updatePriceUI();
      });

      clearAll.addEventListener('click', ()=>{
        inputs.forEach(i=> i.value = 0);
        updateSumUI(); updatePriceUI();
      });

      previewBtn.addEventListener('click', ()=>{
        // Show a quick preview modal (simple alert for this demo)
        const selection = inputs
          .map(i => ({name: i.previousElementSibling ? i.previousElementSibling.textContent.trim() : 'opção', grams: Number(i.value||0)}))
          .filter(x => x.grams > 0);
        if(selection.length === 0){
          alert('Nenhuma opção selecionada — sua marmita está vazia. Defina 300g no total.');
          return;
        }
        let text = 'Visualização da marmita (por unidade):\n\n';
        selection.forEach(s => text += `${s.name}: ${s.grams}g\n`);
        text += '\nTotal: ' + sumGrams() + 'g';
        alert(text);
      });

      orderButton.addEventListener('click', ()=>{
        // Aqui, apenas demonstração — em produção enviar para backend / carrinho
        if(orderButton.disabled) return;
        const qty = Math.floor(Number(qtyEl.value)||0);
        const free = calcFree(qty);
        const total = qty + free;
        const totalPrice = qty * PRICE;
        const summary = [
          'Pedido criado (simulação):',
          '',
          'Marmitas pagas: ' + qty,
          'Marmitas bônus: ' + free,
          'Total recebido: ' + total,
          'Preço total: R$ ' + totalPrice.toFixed(2),
          '',
          'Composição por marmita:'
        ];
        inputs.forEach(i=>{
          const val = Number(i.value||0);
          if(val>0){
            const label = i.previousElementSibling ? i.previousElementSibling.textContent.trim() : 'opção';
            summary.push('- ' + label + ': ' + val + 'g');
          }
        });
        alert(summary.join('\n'));
      });

      // initial
      updateSumUI();
      updatePriceUI();
    })();
  </script>
</body>
</html>
